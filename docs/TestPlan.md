# План тестирования

### Введение

Данный план описывает тестирование всей системы.

Требования, предъявляемые к тестировщику:

* умение управлять смартфоном или персональным компьютером (далее, ПК)
* умение подключать смартфон или ПК к другому устройству по интерфейсу Bluetooth или USB
* понимание механизма работы портов последовательного обмена информацией (COM-портов, Serial-портов)

Цель данного тестирования: проверка работоспособности системы в реальных условиях.

### Объекты тестирования

* Прошивка для микроконтроллера ATmega 2560, который расположен на Arduino Mega 2560 R3
* Корректная работа всей платформы
* API, предоставляемое прошивкой для управление периферийными устройствами микроконтроллера

Атрибуты качества платформы по ISO 25010:

* функциональность
  * функциональная полнота: платформа должна выполнять все возложенные на нее функции (см. [Функциональные требования](Requirements.md#functional_requires))
  * функциональная корректность: платформа должна выполнять все возложенные на нее функции корректно (см. [Функциональные требования](Requirements.md#functional_requires))
* производительность
  * временная характеристика: платформа должна реагировать на каждую команду не более 1 секунды
* практичность
  * защита от ошибок пользователей: платформа должна работать только согласно [протоколу](Requirements.md#protocol) и проверять аргументы каждой команды
* надежность
  * доступность: платформа должна работать от аккомуляторной батареи не менее 5 минут
* сопровождаемость
  * модульность: все периферийные модули должны взаимодействовать с протоколом через специальный модуль взаимодействия, протокол взаимодействия должен знать каждый модуль взаимодействия, все должно быть организовано через специальный класс
* мобильность
  * устанавливаемость: прошивка должна корректно устанавливаться и работать на любой Arduino Mega с аналогичной оригинальной платформе периферией
  * заменяемость: прошивка должна в полной мере заменить свою предыдущую версию

### Риски

Без корректной работы протокола невозможна работа всей платформы в целом

### Аспекты тестирования

* возможность подключения к платформе;
* возможность принудительного отключения от платформы;
* автоматическое отключение от платформы по истечению определенного промежутка времени;
* управление гусеничной платформой (управление движением):  
    - движение вперед;
    - движение назад;
    - разворот по направлению движения часовой стрелки;
    - разворот против направления движения часовой стрелки;
* взаимодействие с поворотной платформой:
    - управление поворотной платформой:  
        - поворот в плоскости xy;
        - поворот в плоскости xz;
    - получение информации о текущем состоянии сервоприводов:
        - получение текущего угла отклонения в плоскости xy;
        - получение текущего угла отклонения в плоскости xz;
* получение корректной информации с датчиков линии (с "заводской" калибровкой датчиков в виде констант);  
* получение корректной информации с датчиков расстояния (с "заводской" калибровкой датчиков в виде констант);
* время жизни от батареи должно быть не менее 5 минут (с учетом полностью заряженной батареи в начале теста);
* реакция на любую команду должна составлять не более 1 секунды;

### Функции, не подлежащие тестированию

Не требуется тестирование атрибута качества "Защита от ошибок пользователей" для всех пунктов меню, поскольку он выполняется на уровне API языка высокого уровня.

Атрибут качества "Устанавливаемость" предполагает наличие еще одной платформы, а она отсуствует вообще.

Атрибут качества "Модульность" должен выполняться на этапе проектирования исходных кодов прошивки, поэтому также не будет протестирован вообще.

### Подходы к тестированию

Для тестирования можно использовать как приложение для ПК, так и приложение для смартфона. 

При тестировании через ПК-версию приложения рекомендуется использовать версию приложения для клавиатуры, т.к. она предоставляет полные возможности API в отличии от версии для геймпада

### Представление результатов

Предоставление результатов требуется описать в следующем виде:

1. Идентификатор
2. Назначение / название
3. Сценарий
4. Ожидаемый результат
5. Фактический результат (заполняется на этапе тестирования)
6. Оценка (заполняется на этапе тестирования)

Далее приведены сами тестовые сценарии

#### Возможность подключения к платформе

1. 1

2. Возможность подключения к платформе

3. Произведите следующие шаги:

   1. Включите платформу

   2. Дождитесь загрузки платформы (на изображении ниже светодиод 1 должен отключиться (перестать моргать), а светодиод 2 должен гореть)

      ![mega_loaded](TestPlan_images/mega_sensor_shield_loaded.jpg)

   3. Запустите приложение и попробуйте подключиться к платформе

4. В приложении появится надпись "Connected"

#### Возможность принудительного отключения от платформы

1. 2
2. Возможность принудительного отключения от платформы по завершению работы с ней
3. Произведите следующие шаги:
   1. Подключитесь к платформе
   2. Выйдите из приложения, через которое подключались (нажмите кнопку "Quit")
   3. Попробуйте заново подключиться к платформе
4. В приложении, с помощью которого производилось подключение второй раз, появится надпись "Connected"

#### Автоматическое отключение от платформы по истечению определенного промежутка времени

1. 3
2. Автоматическое отключение от платформы по истечению определенного промежутка времени
3. Произведите следующие шаги:
   1. Подключитесь к платформе
   2. Аварийно завершить работу приложения, через которое производилось подключение, либо принудительно разорвать соединение (выдернуть USB-провод или отключить Bluetooth-соединение)
   3. Подождите 10 секунд
   4. Попробуйте заново подключиться к платформе
4. В приложении, с помощью которого производилось подключение второй раз, появится надпись "Connected"

#### Движение вперед

1. 4
2. Проверка движения платформы вперед
3. Произведите следующие шаги:
   1. Подключитесь к платформе
   2. Выберите в приложении "move forward". Если требуется, укажите скорость
4. Платформа должна поехать вперед с заданной скоростью

#### Движение назад

1. 5
2. Проверка движения платформы назад
3. Произведите следующие шаги:
   1. Подключитесь к платформе
   2. Выберите в приложении "move back". Если требуется, укажите скорость
4. Платформа должна поехать назад с заданной скоростью

#### Разворот по направлению движения часовой стрелки

1. 6
2. Проверка возможности поворота платформы по часовой стрелке
3. Произведите следующие шаги:
   1. Подключитесь к платформе
   2. Выберите в приложении "turn right (clockwise)". Если требуется, укажите скорость
4. Платформа должна начать поворачиваться с заданной скоростью по часовой стрелке

#### Разворот против направления движения часовой стрелки

1. 7
2. Проверка возможности поворота платформы против часовой стрелки
3. Произведите следующие шаги:
   1. Подключитесь к платформе
   2. Выберите в приложении "turn left (anticlockwise)". Если требуется, укажите скорость
4. Платформа должна начать поворачиваться с заданной скоростью против часовой стрелки

#### Поворот сервоприводов в плоскости xy

1. 8
2. Проверка возможности поворота сервоприводов в плоскости xy
3. Произведите следующие шаги:
   1. Подключитесь к платформе
   2. Выберите в приложении "set horisontal servo angle in degree". Укажите корректный угол в градусах (от 0 до 180)
4. Платформа должна установить сервоприводы на указанный угол

#### Поворот сервоприводов в плоскости xz

1. 9
2. Проверка возможности поворота сервоприводов в плоскости xz
3. Произведите следующие шаги:
   1. Подключитесь к платформе
   2. Выберите в приложении "set vertical servo angle in degree". Укажите корректный угол в градусах (от 0 до 180)
4. Платформа должна установить сервоприводы на указанный угол

#### Получение текущего угла отклонения в сервоприводов в плоскости xy

1. 10
2. Получение текущего угла отклонения в сервоприводов в плоскости xy
3. Произведите следующие шаги:
   1. Подключитесь к платформе
   2. Выберите в приложении "set horisontal servo angle in degree". Укажите корректный угол в градусах (от 0 до 180)
   3. Выберите в приложении "get horisontal servo angle in degree"
4. В приложении должно появится значение, которое было введено в пункте 3.2

#### Получение текущего угла отклонения в сервоприводов в плоскости xz

1. 11
2. Получение текущего угла отклонения в сервоприводов в плоскости xz
3. Произведите следующие шаги:
   1. Подключитесь к платформе
   2. Выберите в приложении "set vertical servo angle in degree". Укажите корректный угол в градусах (от 0 до 180)
   3. Выберите в приложении "get vertical servo angle in degree"
4. В приложении должно появится значение, которое было введено в пункте 3.2

#### Некорректный поворот сервоприводов в плоскости xy

1. 12
2. Проверка возможности поворота сервоприводов в плоскости xy
3. Произведите следующие шаги:
   1. Подключитесь к платформе
   2. Выберите в приложении "set horisontal servo angle in degree". Укажите некорректный угол в градусах (больше 180)
4. Платформа не должна изменить текущий угол сервоприводов

#### Некорректный поворот сервоприводов в плоскости xz

1. 13
2. Проверка возможности поворота сервоприводов в плоскости xz
3. Произведите следующие шаги:
   1. Подключитесь к платформе
   2. Выберите в приложении "set vertical servo angle in degree". Укажите некорректный угол в градусах (больше 180)
4. Платформа не должна изменить текущий угол сервоприводов

#### Получение информации с датчиков линии. Белый лист

1. 14
2. Получение информации с датчиков линии. Проверка корректного определения белого цвета
3. Произведите следующие шаги:
   1. Подключитесь к платформе
   2. Положите под платформу лист белой бумаги
   3. Выберите в приложении "get fixed line value". Укажите номер датчика в диапазоне от 1 до 5
4. В приложении должно появится 0

#### Получение информации с датчиков линии. Черный лист

1. 15
2. Получение информации с датчиков линии. Проверка корректного определения черного цвета
3. Произведите следующие шаги:
   1. Подключитесь к платформе
   2. Положите под платформу лист черной бумаги
   3. Выберите в приложении "get fixed line value". Укажите номер датчика в диапазоне от 1 до 5
4. В приложении должно появится 1

#### Получение информации с датчиков расстояния

1. 16
2. Получение информации с датчиков расстояния
3. Произведите следующие шаги:
   1. Подключитесь к платформе
   2. Подставьте перед центральным датчиком расстояния какой-нибудь непрозрачный предмет, например книгу, на расстоянии приблизительно 15 сантиметров
   3. Выберите в приложении "get fixed distance value". Укажите номер датчика 3
4. В приложении должно появится значение от 10 до 19

#### Проверка времени жизни от батареи

1. 17
2. Проверка времени жизни от батареи.
3. Произведите следующие шаги:
   1. Зарядите аккомуляторную батарею платформы до 100%
   2. Подключитесь к платформе
   3. Повзаимодействуйте с платформой 5 минут
4. Платформа все еще должна работать

#### Проверка времени реакции на любую команду

1. 18
2. Проверка времени реакции на любую команду. Она должна составлять не более 1 секунды
3. Произведите следующие шаги:
   1. Подключитесь к платформе
   2. Выполните любую команду
4. Платформа должна среагировать (вернуть ответ или совершить действие) быстрее, чем за 1 секунду

### Выводы

В вышеописанных тестовых сценариях проверяется выполнение атрибутов качества. Зависимость представлена ниже:

| Атрибут качества               | В каких тестовых сценариях проверяется |
| ------------------------------ | -------------------------------------- |
| Функциональная полнота         | 1-16                                   |
| Функциональная корректность    | 1-16                                   |
| Временная характеристика       | 18                                     |
| Доступность                    | 17                                     |
| Защита от ошибок пользователей | 12-13                                  |
| Модульность                    | -                                      |
| Устанавливаемость              | -                                      |
| Заменяемость                   | 1-16                                   |

Если не выполняется один из тестовых сценариев, то, соответственно, не выполняется и соответствующий атрибут качества. Продукт будет обладать требуемыми атрибутами качества только при выполнении всех тестовых сценариев. 

Функциональные и нефункциональные требования из [SRS](Requirements.md) проверяются в тестовых сценариях 1-16.

